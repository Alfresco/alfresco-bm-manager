<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mongo="http://www.springframework.org/schema/data/mongo"
    xsi:schemaLocation="http://www.springframework.org/schema/context
          http://www.springframework.org/schema/context/spring-context-3.0.xsd
          http://www.springframework.org/schema/data/mongo
          http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
          http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

 
    <!--
        A context for basic testing of the TestRun class
     -->
         
    <!-- Import any application contexts for test runs -->
    <import resource="classpath:config/spring/test-common-context.xml" />

    <!--                 -->
    <!-- EventProcessors -->
    <!--                 -->
    <!--
        The event processors will handle events based on their bean names after removal of the 'event.' prefix.
        So, for example:
            bean "event.start" will handle events named "start"
            bean "event.invite" will handle events named "invite"
        This behaviour can be overridden.  See the javadocs of AbstractEventProcessor.
    -->
    
    <bean id="event.start" class="org.alfresco.bm.event.RaiseEventsEventProcessor" parent="event.base" >
        <constructor-arg name="outputEventName" value="doNothing" />
        <constructor-arg name="timeBetweenEvents" value="5" />
        <constructor-arg name="outputEventCount" value="20" />
        <property name="eventNames">
            <list>
                <value>start</value>
                <value>raiseMore</value>
            </list>
        </property>
        <property name="eventNameRaiseEvents" value="raiseMore" />
        <property name="chart" value="false" />
    </bean>
    
    <bean id="event.doNothing" class="org.alfresco.bm.event.DoNothingEventProcessor" parent="event.base" >
        <property name="chart" value="true" />
    </bean>
    
    <!-- NB: We replace the MongoDB factory with in-memory versions here -->
    <!--     Test will not do this step normally but the unit testing code for the benchmark-server project requires it -->
    
    <bean id="testMongoFactory" class="org.alfresco.mongo.MongoDBForTestsFactory" />
    
</beans>